<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--
===========================================
THE SNAKE â€“ RAGE EDITION
Author: Saboor
Commercial HTML5 Arcade Game
===========================================
-->

<title>The Snake â€“ Rage Edition</title>

<style>
/* ===================== GLOBAL ===================== */
* { box-sizing: border-box; }
body {
    margin:0;
    background:#0d0221;
    color:#00f2ff;
    font-family:'Courier New', monospace;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    overflow:hidden;
    user-select:none;
}

/* ===================== UI ===================== */
canvas {
    background:#0f0524;
    border:4px solid #00f2ff;
    box-shadow:0 0 25px rgba(0,242,255,0.3);
}

button {
    background:#ff0055;
    color:white;
    border:none;
    padding:14px 30px;
    font-size:18px;
    font-weight:bold;
    cursor:pointer;
    margin:6px;
}

input {
    background:#16213e;
    border:2px solid #00f2ff;
    color:white;
    padding:12px;
    width:220px;
    font-size:18px;
    text-align:center;
}

.overlay {
    position:absolute;
    background:rgba(10,5,30,0.97);
    border:3px solid #00f2ff;
    padding:35px;
    text-align:center;
    box-shadow:0 0 40px #00f2ff;
    z-index:10;
}

.hidden { display:none; }

.stats {
    width:800px;
    display:flex;
    justify-content:space-between;
    padding:10px 15px;
    margin-bottom:8px;
    background:rgba(0,242,255,0.08);
    border:2px solid rgba(0,242,255,0.3);
}

/* ===================== TOXIC BAR ===================== */
.toxic-wrap {
    position:absolute;
    right:-35px;
    display:none;
}
.toxic-box {
    width:12px;
    height:300px;
    border:2px solid #00f2ff;
    border-radius:10px;
    overflow:hidden;
}
#toxicBar {
    width:100%;
    height:0%;
    background:linear-gradient(0deg,#00f2ff,#ff0055);
    transition:height 0.25s;
}

/* ===================== MAP TEXT ===================== */
#mapName {
    position:absolute;
    font-size:40px;
    font-weight:bold;
    opacity:0;
    transition:0.5s;
    pointer-events:none;
}

/* ===================== AUDIO ===================== */
.audioPanel {
    position:fixed;
    top:20px;
    right:20px;
    display:flex;
    gap:12px;
}
.audioBtn {
    width:50px;
    height:50px;
    border-radius:50%;
    border:2px solid #00f2ff;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
}
.audioBtn.muted {
    border-color:#ff0055;
}
</style>
</head>

<body>

<!-- ===================== AUDIO ===================== -->
<audio id="bgMusic" loop src="music.mp3"></audio>
<audio id="eatSound" src="eat.mp3"></audio>
<audio id="deathSound" src="death.mp3"></audio>
<audio id="rageSound" loop src="rage.mp3"></audio>

<!-- ===================== AUDIO UI ===================== -->
<div class="audioPanel">
    <div class="audioBtn" id="musicBtn">ðŸŽµ</div>
    <div class="audioBtn" id="sfxBtn">ðŸ”Š</div>
</div>

<!-- ===================== START SCREEN ===================== -->
<div id="startScreen" class="overlay">
    <h1 style="font-size:48px;margin:0">THE SNAKE</h1>
    <p>RAGE EDITION</p>
    <input id="playerName" placeholder="ENTER NAME" maxlength="12">
    <br>
    <button onclick="startGame()">START</button>
</div>

<!-- ===================== GAME OVER ===================== -->
<div id="gameOver" class="overlay hidden">
    <h1>GAME OVER</h1>
    <p id="finalRoast"></p>
    <h2 id="finalScore"></h2>
    <button onclick="location.reload()">RETRY</button>
</div>

<!-- ===================== STATS ===================== -->
<div class="stats">
    <div>LVL: <span id="lvl">1</span></div>
    <div>SCORE: <span id="score">0</span></div>
</div>

<!-- ===================== GAME ===================== -->
<div style="position:relative">
    <canvas id="game" width="800" height="600"></canvas>

    <div class="toxic-wrap" id="toxicUI">
        <div class="toxic-box">
            <div id="toxicBar"></div>
        </div>
    </div>

    <div id="mapName"></div>
</div>

<script>
/* ===================== CONFIG ===================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const THEMES = [
    {name:"NEON CITY", bg:"#0d0221", head:"#00f2ff", body:"#7000ff"},
    {name:"BLOOD MOON", bg:"#210202", head:"#ff4d4d", body:"#800000"},
    {name:"CYBER VOID", bg:"#000", head:"#f1c40f", body:"#e67e22"}
];

const ROASTS = [
    "SKILL ISSUE.",
    "EMBARRASSING.",
    "THE WALL WON.",
    "TRY AGAIN, ROOKIE.",
    "SNAKE DIED OF SHAME."
];

/* ===================== STATE ===================== */
let snake, food, dx, dy;
let score = 0, level = 1;
let toxicity = 0, rage = false;
let running = false;
let theme = THEMES[0];
let musicOn = true, sfxOn = true;

/* ===================== INIT ===================== */
function init() {
    snake = [{x:400,y:300},{x:380,y:300}];
    dx = 20; dy = 0;
    food = spawnFood();
}
init();

/* ===================== GAME ===================== */
function startGame(){
    const name = playerName.value.trim();
    if(name.length < 2){
        alert("ENTER A NAME.");
        return;
    }
    document.getElementById("startScreen").style.display="none";
    document.getElementById("toxicUI").style.display="block";
    running = true;
    bgMusic.volume = 0.15;
    if(musicOn) bgMusic.play();
    loop();
}

function spawnFood(){
    return {
        x:Math.floor(Math.random()*39)*20,
        y:Math.floor(Math.random()*29)*20
    };
}

function loop(){
    if(!running) return;

    setTimeout(()=>{
        update();
        draw();
        loop();
    }, rage ? 45 : 120);
}

function update(){
    let head = {x:snake[0].x+dx, y:snake[0].y+dy};

    if(head.x<0) head.x=780;
    if(head.y<0) head.y=580;
    if(head.x>=800) head.x=0;
    if(head.y>=600) head.y=0;

    if(snake.some(p=>p.x===head.x && p.y===head.y)){
        endGame();
        return;
    }

    snake.unshift(head);

    if(head.x===food.x && head.y===food.y){
        score+=10;
        toxicity=Math.max(0,toxicity-30);
        food=spawnFood();
        scoreVal();
        if(sfxOn) eatSound.play();
    } else {
        snake.pop();
        toxicity+=2;
    }

    rage = toxicity>=100;
    toxicBar.style.height=Math.min(toxicity,100)+"%";
}

function draw(){
    ctx.fillStyle=theme.bg;
    ctx.fillRect(0,0,800,600);

    ctx.fillStyle=theme.head;
    ctx.fillRect(food.x,food.y,18,18);

    snake.forEach((p,i)=>{
        ctx.fillStyle = rage ? "#ff0055" : (i===0?theme.head:theme.body);
        ctx.fillRect(p.x,p.y,18,18);
    });
}

function scoreVal(){
    document.getElementById("score").innerText=score;
}

function endGame(){
    running=false;
    bgMusic.pause();
    if(sfxOn) deathSound.play();
    finalScore.innerText="SCORE: "+score;
    finalRoast.innerText=ROASTS[Math.floor(Math.random()*ROASTS.length)];
    gameOver.classList.remove("hidden");
}

/* ===================== CONTROLS ===================== */
document.addEventListener("keydown",e=>{
    if(!running) return;
    if(e.key==="ArrowLeft" && dx===0){dx=-20;dy=0;}
    if(e.key==="ArrowRight" && dx===0){dx=20;dy=0;}
    if(e.key==="ArrowUp" && dy===0){dx=0;dy=-20;}
    if(e.key==="ArrowDown" && dy===0){dx=0;dy=20;}
});

/* ===================== AUDIO ===================== */
musicBtn.onclick=()=>{
    musicOn=!musicOn;
    musicBtn.classList.toggle("muted",!musicOn);
    musicOn?bgMusic.play():bgMusic.pause();
};
sfxBtn.onclick=()=>{
    sfxOn=!sfxOn;
    sfxBtn.classList.toggle("muted",!sfxOn);
};
</script>

</body>
</html>

